async function getCountryDataAndFitBounds(t){try{const{data:e}=await $.ajax({url:`/api/countries?country=${t}`,method:"GET",dataType:"json"}),[o,a]=e.map((t=>t)),n="BD"===t,r="RU"===t;let s;return!a||r||n||(s=[[a.west,a.south],[a.east,a.north]]),r&&(s=[[-3.1324472430562764,16.75653385697838],[193.5290454579531,81.78892590568162]]),n&&(s=[[86.58999500917906,21.739773759938373],[93.47829389750098,26.659078300978848]]),map.fitBounds(s,{speed:.5,curve:2,maxZoom:8,duration:2500}),{restCountries:o,geonames:a}}catch(t){throw t}}mapPromise.then((async t=>{try{changePanelSpinners(!0),disableMapInteraction(!0),disableAllButtons=!0;const{data:e}=await $.ajax({url:"/api/ipinfo",method:"GET",data:"json"});userGeo=e;const o=userGeo.loc.split(","),a=parseFloat(o[0]),n=parseFloat(o[1]);mostRecentLocation={latitude:a,longitude:n,context:{iso_a2:userGeo.country,region:userGeo.region,place:userGeo.city,neighborhood:null,district:null,name:null}},t.flyTo({center:[n,a],speed:.5,curve:2,zoom:4,duration:2e3})}catch{}finally{changePanelSpinners(!1),disableMapInteraction(!1),disableAllButtons=!1}$.ajax({url:"/api/countries?country=all",method:"GET",dataType:"json",success:({data:t})=>{countryList=t.sort(((t,e)=>t.properties.name.localeCompare(e.properties.name))).map((({properties:t})=>({name:t.name,iso_a2:t.iso_a2}))),countryList.forEach((({name:t,iso_a2:e})=>{$("#country-select").append(`<option id="country-option" class="text-lg font-sans" value="${e}">${t}</option>`),$("#country-select-list").append(`<option role='option' id='country-list-option' class='text-lg font-light cursor-pointer hover:bg-blue-300 hover:text-white-100 hover:font-normal w-full rounded-md truncate' value='${e}'>${t}</option>`)}))}}),$.ajax({url:"/api/mapboxgljs/category?list=true",method:"GET",dataType:"json",success:t=>{categoryList=t.data,addMarkersSourceAndLayer([]),addPoiSourceAndLayer([],"default-pois")}})}));